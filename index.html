<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMPN 58 PLG - Sistem Manajemen Sekolah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        .animate-bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .sidebar-transition {
            transition: transform 0.3s ease-in-out;
        }
        
        .status-hadir { background-color: #10b981; }
        .status-sakit { background-color: #f59e0b; }
        .status-izin { background-color: #3b82f6; }
        .status-alfa { background-color: #ef4444; }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900">
        <div class="bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-md animate-bounce-in">
            <div class="text-center mb-8">
                <i class="fas fa-graduation-cap text-5xl text-purple-400 mb-4"></i>
                <h1 class="text-3xl font-bold text-white mb-2">SMPN 58 PLG</h1>
                <p class="text-gray-400">Sistem Manajemen Sekolah</p>
            </div>
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300" placeholder="Masukkan username">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300" placeholder="Masukkan password">
                </div>
                <button type="submit" class="w-full btn-primary text-white py-3 rounded-lg font-semibold">
                    <i class="fas fa-sign-in-alt mr-2"></i>Masuk
                </button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="bg-gray-800 shadow-lg sticky top-0 z-40">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center space-x-4">
                    <button id="sidebarToggle" class="text-gray-300 hover:text-white transition-colors duration-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 id="pageTitle" class="text-xl font-semibold text-white">Beranda</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-gray-300">SMPN 58 PLG</span>
                    <i class="fas fa-graduation-cap text-purple-400 text-2xl"></i>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-gray-800 shadow-xl z-50 sidebar-transition transform -translate-x-full lg:translate-x-0">
            <div class="p-6 border-b border-gray-700">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-graduation-cap text-3xl text-purple-400"></i>
                    <div>
                        <h2 class="text-lg font-bold text-white">SMPN 58 PLG</h2>
                        <p class="text-sm text-gray-400">Admin Panel</p>
                    </div>
                </div>
            </div>
            
            <nav class="mt-6">
                <a href="#" onclick="showPage('beranda')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-home mr-3"></i>Beranda
                </a>
                <a href="#" onclick="showPage('agenda-guru')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-calendar-alt mr-3"></i>Agenda Guru
                </a>
                <a href="#" onclick="showPage('jurnal-guru')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-book mr-3"></i>Jurnal Guru
                </a>
                <a href="#" onclick="showPage('absensi')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-user-check mr-3"></i>Absensi
                </a>
                <a href="#" onclick="showPage('siswa')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-users mr-3"></i>Data Siswa
                </a>
                <a href="#" onclick="showPage('penilaian')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-star mr-3"></i>Penilaian
                </a>
                <a href="#" onclick="showPage('rekapan')" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-200">
                    <i class="fas fa-chart-bar mr-3"></i>Rekapan
                </a>
                <a href="#" onclick="logout()" class="nav-item flex items-center px-6 py-3 text-gray-300 hover:bg-red-600 hover:text-white transition-all duration-200">
                    <i class="fas fa-sign-out-alt mr-3"></i>Logout
                </a>
            </nav>
            
            <div class="absolute bottom-4 left-0 right-0 px-6">
                <p class="text-xs text-gray-500 text-center">Â© 2025 Aris Bermansyah, S.Kom</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="mainContent" class="lg:ml-64 min-h-screen bg-gray-900">
            <!-- Beranda -->
            <div id="berandaPage" class="page-content p-6">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Selamat Datang</h2>
                    <p class="text-gray-400">Sistem Manajemen Sekolah SMPN 58 Palembang</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div onclick="showPage('agenda-guru')" class="bg-gradient-to-br from-blue-600 to-blue-800 p-6 rounded-xl shadow-lg hover-lift cursor-pointer">
                        <i class="fas fa-calendar-alt text-4xl text-white mb-4"></i>
                        <h3 class="text-xl font-semibold text-white mb-2">Agenda Guru</h3>
                        <p class="text-blue-100">Kelola agenda dan jadwal mengajar</p>
                    </div>
                    
                    <div onclick="showPage('jurnal-guru')" class="bg-gradient-to-br from-green-600 to-green-800 p-6 rounded-xl shadow-lg hover-lift cursor-pointer">
                        <i class="fas fa-book text-4xl text-white mb-4"></i>
                        <h3 class="text-xl font-semibold text-white mb-2">Jurnal Guru</h3>
                        <p class="text-green-100">Catat kegiatan pembelajaran harian</p>
                    </div>
                    
                    <div onclick="showPage('siswa')" class="bg-gradient-to-br from-indigo-600 to-indigo-800 p-6 rounded-xl shadow-lg hover-lift cursor-pointer">
                        <i class="fas fa-users text-4xl text-white mb-4"></i>
                        <h3 class="text-xl font-semibold text-white mb-2">Data Siswa</h3>
                        <p class="text-indigo-100">Kelola data siswa per kelas</p>
                    </div>
                    
                    <div onclick="showPage('absensi')" class="bg-gradient-to-br from-purple-600 to-purple-800 p-6 rounded-xl shadow-lg hover-lift cursor-pointer">
                        <i class="fas fa-user-check text-4xl text-white mb-4"></i>
                        <h3 class="text-xl font-semibold text-white mb-2">Absensi</h3>
                        <p class="text-purple-100">Kelola kehadiran siswa</p>
                    </div>
                    
                    <div onclick="showPage('penilaian')" class="bg-gradient-to-br from-yellow-600 to-orange-600 p-6 rounded-xl shadow-lg hover-lift cursor-pointer">
                        <i class="fas fa-star text-4xl text-white mb-4"></i>
                        <h3 class="text-xl font-semibold text-white mb-2">Penilaian</h3>
                        <p class="text-yellow-100">Input dan kelola nilai siswa</p>
                    </div>
                    
                    <div onclick="showPage('rekapan')" class="bg-gradient-to-br from-red-600 to-pink-600 p-6 rounded-xl shadow-lg hover-lift cursor-pointer">
                        <i class="fas fa-chart-bar text-4xl text-white mb-4"></i>
                        <h3 class="text-xl font-semibold text-white mb-2">Rekapan</h3>
                        <p class="text-red-100">Lihat laporan dan statistik</p>
                    </div>
                </div>
            </div>

            <!-- Agenda Guru -->
            <div id="agendaGuruPage" class="page-content p-6 hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Agenda Guru</h2>
                    <p class="text-gray-400">Kelola agenda dan jadwal mengajar</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <h3 class="text-xl font-semibold text-white mb-6">Tambah Agenda Baru</h3>
                    <form id="agendaForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Tanggal</label>
                            <input type="date" id="agendaTanggal" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Waktu</label>
                            <input type="time" id="agendaWaktu" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Mata Pelajaran</label>
                            <select id="agendaMapel" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Informatika">Informatika</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                            <select id="agendaKelas" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="7.1">7.1</option>
                                <option value="7.2">7.2</option>
                                <option value="7.3">7.3</option>
                                <option value="7.4">7.4</option>
                                <option value="8.1">8.1</option>
                                <option value="8.2">8.2</option>
                                <option value="8.3">8.3</option>
                                <option value="8.4">8.4</option>
                                <option value="9.1">9.1</option>
                                <option value="9.2">9.2</option>
                                <option value="9.3">9.3</option>
                                <option value="9.4">9.4</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Materi/Kegiatan</label>
                            <textarea id="agendaMateri" rows="3" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Deskripsi materi atau kegiatan"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Jenis Kegiatan</label>
                            <select id="agendaJenis" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Pembelajaran">Pembelajaran</option>
                                <option value="Ulangan">Ulangan</option>
                                <option value="Praktikum">Praktikum</option>
                                <option value="Diskusi">Diskusi</option>
                                <option value="Presentasi">Presentasi</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <button type="submit" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold">
                                <span class="btn-text"><i class="fas fa-plus mr-2"></i>Tambah Agenda</span>
                                <span class="btn-loading hidden"><div class="loading mr-2"></div>Menyimpan...</span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-white mb-6">Daftar Agenda</h3>
                    <div id="agendaList" class="space-y-4">
                        <!-- Agenda items will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Jurnal Guru -->
            <div id="jurnalGuruPage" class="page-content p-6 hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Jurnal Guru</h2>
                    <p class="text-gray-400">Catat kegiatan pembelajaran harian</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <h3 class="text-xl font-semibold text-white mb-6">Tambah Jurnal Baru</h3>
                    <form id="jurnalForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Tanggal</label>
                            <input type="date" id="jurnalTanggal" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Jam Ke</label>
                            <select id="jurnalJam" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Mata Pelajaran</label>
                            <select id="jurnalMapel" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Informatika">Informatika</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                            <select id="jurnalKelas" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="7.1">7.1</option>
                                <option value="7.2">7.2</option>
                                <option value="7.3">7.3</option>
                                <option value="7.4">7.4</option>
                                <option value="8.1">8.1</option>
                                <option value="8.2">8.2</option>
                                <option value="8.3">8.3</option>
                                <option value="8.4">8.4</option>
                                <option value="9.1">9.1</option>
                                <option value="9.2">9.2</option>
                                <option value="9.3">9.3</option>
                                <option value="9.4">9.4</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Materi yang Diajarkan</label>
                            <textarea id="jurnalMateri" rows="3" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Deskripsi materi yang diajarkan"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Jumlah Siswa Hadir</label>
                            <input type="number" id="jurnalHadir" min="0" max="40" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Jumlah Siswa Tidak Hadir</label>
                            <input type="number" id="jurnalTidakHadir" min="0" max="40" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Catatan/Kendala (Opsional)</label>
                            <textarea id="jurnalCatatan" rows="3" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Catatan atau kendala yang dihadapi"></textarea>
                        </div>
                        <div class="md:col-span-2">
                            <button type="submit" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold">
                                <span class="btn-text"><i class="fas fa-plus mr-2"></i>Tambah Jurnal</span>
                                <span class="btn-loading hidden"><div class="loading mr-2"></div>Menyimpan...</span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-white mb-6">Daftar Jurnal</h3>
                    <div id="jurnalList" class="space-y-4">
                        <!-- Jurnal items will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Data Siswa -->
            <div id="siswaPage" class="page-content p-6 hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Data Siswa</h2>
                    <p class="text-gray-400">Kelola data siswa per kelas</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <h3 class="text-xl font-semibold text-white mb-6">Tambah Siswa Baru</h3>
                    <form id="siswaForm" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Nama Lengkap</label>
                            <input type="text" id="namaSiswa" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Nama lengkap siswa">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                            <select id="kelasSiswa" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="7.1">7.1</option>
                                <option value="7.2">7.2</option>
                                <option value="7.3">7.3</option>
                                <option value="7.4">7.4</option>
                                <option value="8.1">8.1</option>
                                <option value="8.2">8.2</option>
                                <option value="8.3">8.3</option>
                                <option value="8.4">8.4</option>
                                <option value="9.1">9.1</option>
                                <option value="9.2">9.2</option>
                                <option value="9.3">9.3</option>
                                <option value="9.4">9.4</option>
                            </select>
                        </div>
                        <div>
                            <button type="submit" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold mt-6">
                                <span class="btn-text"><i class="fas fa-plus mr-2"></i>Tambah Siswa</span>
                                <span class="btn-loading hidden"><div class="loading mr-2"></div>Menyimpan...</span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-white">Filter Data Siswa</h3>
                        <div class="flex space-x-4">
                            <select id="filterKelas" class="px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white">
                                <option value="">Semua Kelas</option>
                                <option value="7.1">7.1</option>
                                <option value="7.2">7.2</option>
                                <option value="7.3">7.3</option>
                                <option value="7.4">7.4</option>
                                <option value="8.1">8.1</option>
                                <option value="8.2">8.2</option>
                                <option value="8.3">8.3</option>
                                <option value="8.4">8.4</option>
                                <option value="9.1">9.1</option>
                                <option value="9.2">9.2</option>
                                <option value="9.3">9.3</option>
                                <option value="9.4">9.4</option>
                            </select>
                            <button onclick="loadDataSiswa()" class="btn-primary px-4 py-2 rounded-lg text-white">
                                <i class="fas fa-search mr-2"></i>Filter
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-white mb-6">Daftar Siswa</h3>
                    <div id="siswaList" class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="border-b border-gray-700">
                                    <th class="pb-3 text-gray-300">No</th>
                                    <th class="pb-3 text-gray-300">Nama Siswa</th>
                                    <th class="pb-3 text-gray-300">Kelas</th>
                                    <th class="pb-3 text-gray-300">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="siswaTableBody">
                                <!-- Student data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Absensi -->
            <div id="absensiPage" class="page-content p-6 hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Absensi Siswa</h2>
                    <p class="text-gray-400">Kelola kehadiran siswa</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Jenis Absen</label>
                            <select id="jenisAbsen" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Wali Kelas">Wali Kelas</option>
                                <option value="Guru Mapel">Guru Mapel</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                            <select id="kelasAbsen" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="7.1">7.1</option>
                                <option value="7.2">7.2</option>
                                <option value="7.3">7.3</option>
                                <option value="7.4">7.4</option>
                                <option value="8.1">8.1</option>
                                <option value="8.2">8.2</option>
                                <option value="8.3">8.3</option>
                                <option value="8.4">8.4</option>
                                <option value="9.1">9.1</option>
                                <option value="9.2">9.2</option>
                                <option value="9.3">9.3</option>
                                <option value="9.4">9.4</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Tanggal</label>
                            <input type="date" id="tanggalAbsen" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <button onclick="loadAbsensi()" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold mb-6">
                        <i class="fas fa-search mr-2"></i>Muat Data Siswa
                    </button>
                </div>
                
                <div id="absensiContainer" class="bg-gray-800 rounded-xl p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-white">Daftar Siswa</h3>
                        <button onclick="simpanAbsensi()" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold">
                            <span class="btn-text"><i class="fas fa-save mr-2"></i>Simpan Absensi</span>
                            <span class="btn-loading hidden"><div class="loading mr-2"></div>Menyimpan...</span>
                        </button>
                    </div>
                    <div id="siswaGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Student cards will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Penilaian -->
            <div id="penilaianPage" class="page-content p-6 hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Penilaian Siswa</h2>
                    <p class="text-gray-400">Input dan kelola nilai siswa</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                            <select id="kelasPenilaian" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="7.1">7.1</option>
                                <option value="7.2">7.2</option>
                                <option value="7.3">7.3</option>
                                <option value="7.4">7.4</option>
                                <option value="8.1">8.1</option>
                                <option value="8.2">8.2</option>
                                <option value="8.3">8.3</option>
                                <option value="8.4">8.4</option>
                                <option value="9.1">9.1</option>
                                <option value="9.2">9.2</option>
                                <option value="9.3">9.3</option>
                                <option value="9.4">9.4</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Jenis Penilaian</label>
                            <select id="jenisPenilaian" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Harian">Harian</option>
                                <option value="Tugas">Tugas</option>
                                <option value="Bab">Bab</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Keterangan</label>
                            <input type="text" id="keteranganPenilaian" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Contoh: Ulangan Harian Bab 1">
                        </div>
                    </div>
                    <button onclick="loadPenilaian()" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold mb-6">
                        <i class="fas fa-search mr-2"></i>Muat Data Siswa
                    </button>
                </div>
                
                <div id="penilaianContainer" class="bg-gray-800 rounded-xl p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-white">Input Nilai</h3>
                        <button onclick="simpanPenilaian()" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold">
                            <span class="btn-text"><i class="fas fa-save mr-2"></i>Simpan Nilai</span>
                            <span class="btn-loading hidden"><div class="loading mr-2"></div>Menyimpan...</span>
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="border-b border-gray-700">
                                    <th class="pb-3 text-gray-300">No</th>
                                    <th class="pb-3 text-gray-300">Nama Siswa</th>
                                    <th class="pb-3 text-gray-300">Nilai (0-100)</th>
                                </tr>
                            </thead>
                            <tbody id="penilaianTable">
                                <!-- Student rows will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Rekapan -->
            <div id="rekapanPage" class="page-content p-6 hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Rekapan Data</h2>
                    <p class="text-gray-400">Lihat laporan dan statistik</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-6 mb-8">
                    <div class="flex space-x-1 mb-6">
                        <button onclick="showRekapTab('absensi')" id="tabAbsensi" class="px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold">Rekapan Absensi</button>
                        <button onclick="showRekapTab('kehadiran')" id="tabKehadiran" class="px-6 py-3 bg-gray-700 text-gray-300 rounded-lg font-semibold">Total Kehadiran</button>
                    </div>
                    
                    <!-- Rekapan Absensi Tab -->
                    <div id="rekapAbsensiTab">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Tingkatan</label>
                                <select id="tingkatanRekap" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="7">Kelas 7</option>
                                    <option value="8">Kelas 8</option>
                                    <option value="9">Kelas 9</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                                <select id="kelasRekap" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Jenis Rekap</label>
                                <select id="jenisRekap" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="harian">Harian</option>
                                    <option value="bulanan">Bulanan</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Tanggal/Bulan</label>
                                <input type="date" id="tanggalRekap" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="flex space-x-4">
                            <button onclick="loadRekapAbsensi()" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold">
                                <i class="fas fa-search mr-2"></i>Tampilkan Rekap
                            </button>
                            <button onclick="cetakRekap()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg text-white font-semibold transition-colors duration-200">
                                <i class="fas fa-print mr-2"></i>Cetak
                            </button>
                        </div>
                    </div>
                    
                    <!-- Total Kehadiran Tab -->
                    <div id="rekapKehadiranTab" class="hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Kelas</label>
                                <select id="kelasKehadiran" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="7.1">7.1</option>
                                    <option value="7.2">7.2</option>
                                    <option value="7.3">7.3</option>
                                    <option value="7.4">7.4</option>
                                    <option value="8.1">8.1</option>
                                    <option value="8.2">8.2</option>
                                    <option value="8.3">8.3</option>
                                    <option value="8.4">8.4</option>
                                    <option value="9.1">9.1</option>
                                    <option value="9.2">9.2</option>
                                    <option value="9.3">9.3</option>
                                    <option value="9.4">9.4</option>
                                </select>
                            </div>
                            <div>
                                <button onclick="loadTotalKehadiran()" class="btn-primary px-6 py-3 rounded-lg text-white font-semibold mt-6">
                                    <i class="fas fa-users mr-2"></i>Tampilkan Total Kehadiran
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="rekapContainer" class="bg-gray-800 rounded-xl p-6 hidden">
                    <div id="rekapContent">
                        <!-- Rekap content will be populated here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Sidebar Overlay -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"></div>

    <script>
        // Configuration - Replace with your Google Apps Script Web App URL
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzS5c71lxfsPL5nXNF3076m-M2yF49YNghfu-THtrvO1EiO8HlIuIrZs0kC-Up2wz9bOQ/exec';
        
        // Sample data
        const sampleStudents = [
            'Ahmad Rizki', 'Siti Nurhaliza', 'Budi Santoso', 'Dewi Sartika', 'Eko Prasetyo',
            'Fitri Handayani', 'Gilang Ramadhan', 'Hana Pertiwi', 'Indra Gunawan', 'Joko Widodo',
            'Kartika Sari', 'Lukman Hakim', 'Maya Sari', 'Nanda Pratama', 'Oki Setiana',
            'Putri Ayu', 'Qori Sumantri', 'Rina Marlina', 'Sandi Permana', 'Tari Melati',
            'Umar Bakri', 'Vina Panduwinata', 'Wawan Setiawan', 'Xenia Gratia', 'Yudi Latif',
            'Zahra Aulia', 'Andi Lala', 'Bayu Skak', 'Citra Kirana', 'Doni Salmanan'
        ];

        let currentAgendaData = [];
        let currentJurnalData = [];
        let currentAbsensiData = [];
        let currentPenilaianData = [];
        let currentSiswaData = [];

        // Google Sheets Integration Functions
        async function sendToGoogleSheets(action, data) {
            try {
                console.log('Sending to Google Sheets:', { action, data });
                
                const payload = {
                    action: action,
                    data: data,
                    timestamp: new Date().toISOString()
                };
                
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
                
                console.log('Response sent to Google Sheets');
                return { success: true };
            } catch (error) {
                console.error('Error sending to Google Sheets:', error);
                return { success: false, error: error.message };
            }
        }

        async function getFromGoogleSheets(action, params = {}) {
            try {
                const url = new URL(GOOGLE_SCRIPT_URL);
                url.searchParams.append('action', action);
                Object.keys(params).forEach(key => {
                    url.searchParams.append(key, params[key]);
                });

                const response = await fetch(url.toString());
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error getting from Google Sheets:', error);
                return { success: false, error: error.message };
            }
        }

        // Button loading state management
        function setButtonLoading(button, loading) {
            const btnText = button.querySelector('.btn-text');
            const btnLoading = button.querySelector('.btn-loading');
            
            if (loading) {
                btnText.classList.add('hidden');
                btnLoading.classList.remove('hidden');
                button.disabled = true;
            } else {
                btnText.classList.remove('hidden');
                btnLoading.classList.add('hidden');
                button.disabled = false;
            }
        }

        // Initialize sample data
        async function initializeSampleData() {
            try {
                // Load existing data from Google Sheets
                const agendaResponse = await getFromGoogleSheets('getAgenda');
                const jurnalResponse = await getFromGoogleSheets('getJurnal');
                const siswaResponse = await getFromGoogleSheets('getSiswa');
                
                if (agendaResponse.success) {
                    currentAgendaData = agendaResponse.data || [];
                }
                
                if (jurnalResponse.success) {
                    currentJurnalData = jurnalResponse.data || [];
                }
                
                if (siswaResponse.success && siswaResponse.data && siswaResponse.data.length > 0) {
                    currentSiswaData = siswaResponse.data;
                } else {
                    // Add some sample student data for testing
                    currentSiswaData = [
                        { nama: 'Ahmad Rizki Pratama', kelas: '7.1' },
                        { nama: 'Siti Nurhaliza', kelas: '7.1' },
                        { nama: 'Budi Santoso', kelas: '7.1' },
                        { nama: 'Dewi Sartika', kelas: '7.2' },
                        { nama: 'Eko Prasetyo', kelas: '7.2' },
                        { nama: 'Fitri Handayani', kelas: '8.1' },
                        { nama: 'Gilang Ramadhan', kelas: '8.1' },
                        { nama: 'Hana Pertiwi', kelas: '9.1' }
                    ];
                }
                
                displayAgendaList();
                displayJurnalList();
                displaySiswaList();
            } catch (error) {
                console.error('Error loading data:', error);
                // Fallback to sample data
                currentAgendaData = [
                    {
                        tanggal: '2025-01-15',
                        waktu: '07:30',
                        mapel: 'Informatika',
                        kelas: '7.1',
                        materi: 'Pengenalan Algoritma dan Pemrograman',
                        jenis: 'Pembelajaran'
                    },
                    {
                        tanggal: '2025-01-15',
                        waktu: '09:15',
                        mapel: 'Informatika',
                        kelas: '8.2',
                        materi: 'Struktur Data Array',
                        jenis: 'Praktikum'
                    }
                ];

                currentJurnalData = [
                    {
                        tanggal: '2025-01-15',
                        jam: '1',
                        mapel: 'Informatika',
                        kelas: '7.1',
                        materi: 'Pengenalan konsep algoritma dengan flowchart',
                        hadir: 28,
                        tidakHadir: 2,
                        catatan: 'Siswa antusias dengan materi baru'
                    }
                ];

                // Add sample student data for testing
                currentSiswaData = [
                    { nama: 'Ahmad Rizki Pratama', kelas: '7.1' },
                    { nama: 'Siti Nurhaliza', kelas: '7.1' },
                    { nama: 'Budi Santoso', kelas: '7.1' },
                    { nama: 'Dewi Sartika', kelas: '7.2' },
                    { nama: 'Eko Prasetyo', kelas: '7.2' },
                    { nama: 'Fitri Handayani', kelas: '8.1' },
                    { nama: 'Gilang Ramadhan', kelas: '8.1' },
                    { nama: 'Hana Pertiwi', kelas: '9.1' }
                ];

                displayAgendaList();
                displayJurnalList();
                displaySiswaList();
            }
        }

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === 'admin' && password === 'admin123') {
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                showNotification('Login berhasil!', 'success');
                initializeSampleData();
            } else {
                showNotification('Username atau password salah!', 'error');
            }
        });

        // Navigation
        function showPage(page) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
            
            // Map page names to their actual IDs
            const pageIds = {
                'beranda': 'berandaPage',
                'agenda-guru': 'agendaGuruPage',
                'jurnal-guru': 'jurnalGuruPage',
                'siswa': 'siswaPage',
                'absensi': 'absensiPage',
                'penilaian': 'penilaianPage',
                'rekapan': 'rekapanPage'
            };
            
            // Show selected page
            const targetPage = document.getElementById(pageIds[page]);
            if (targetPage) {
                targetPage.classList.remove('hidden');
            }
            
            // Update page title
            const titles = {
                'beranda': 'Beranda',
                'agenda-guru': 'Agenda Guru',
                'jurnal-guru': 'Jurnal Guru',
                'siswa': 'Data Siswa',
                'absensi': 'Absensi Siswa',
                'penilaian': 'Penilaian Siswa',
                'rekapan': 'Rekapan Data'
            };
            document.getElementById('pageTitle').textContent = titles[page];
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-gray-700', 'text-white');
                item.classList.add('text-gray-300');
            });
            
            // Close sidebar on mobile
            if (window.innerWidth < 1024) {
                closeSidebar();
            }
        }

        // Sidebar functionality
        document.getElementById('sidebarToggle').addEventListener('click', toggleSidebar);
        document.getElementById('sidebarOverlay').addEventListener('click', closeSidebar);

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            if (sidebar.classList.contains('-translate-x-full')) {
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            }
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.add('-translate-x-full');
            document.getElementById('sidebarOverlay').classList.add('hidden');
        }

        // Logout
        function logout() {
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            showNotification('Logout berhasil!', 'success');
        }

        // Notifications
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Agenda Guru functionality
        document.getElementById('agendaForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            setButtonLoading(submitButton, true);
            
            const agendaData = {
                tanggal: document.getElementById('agendaTanggal').value,
                waktu: document.getElementById('agendaWaktu').value,
                mapel: document.getElementById('agendaMapel').value,
                kelas: document.getElementById('agendaKelas').value,
                materi: document.getElementById('agendaMateri').value,
                jenis: document.getElementById('agendaJenis').value
            };
            
            if (!agendaData.tanggal || !agendaData.waktu || !agendaData.materi) {
                showNotification('Mohon lengkapi semua field yang wajib!', 'error');
                setButtonLoading(submitButton, false);
                return;
            }
            
            try {
                const result = await sendToGoogleSheets('addAgenda', agendaData);
                
                if (result.success) {
                    currentAgendaData.unshift(agendaData);
                    displayAgendaList();
                    this.reset();
                    showNotification('Agenda berhasil ditambahkan dan disimpan ke Google Sheets!', 'success');
                } else {
                    showNotification('Agenda ditambahkan tapi gagal disimpan ke Google Sheets', 'error');
                }
            } catch (error) {
                showNotification('Terjadi kesalahan saat menyimpan agenda', 'error');
            }
            
            setButtonLoading(submitButton, false);
        });

        function displayAgendaList() {
            const agendaList = document.getElementById('agendaList');
            agendaList.innerHTML = '';
            
            currentAgendaData.forEach((agenda, index) => {
                const agendaCard = document.createElement('div');
                agendaCard.className = 'bg-gray-700 p-4 rounded-lg hover-lift animate-fade-in';
                agendaCard.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="text-lg font-semibold text-white">${agenda.materi}</h4>
                        <span class="px-3 py-1 bg-purple-600 text-white text-sm rounded-full">${agenda.jenis}</span>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-300">
                        <div><i class="fas fa-calendar mr-2"></i>${agenda.tanggal}</div>
                        <div><i class="fas fa-clock mr-2"></i>${agenda.waktu}</div>
                        <div><i class="fas fa-book mr-2"></i>${agenda.mapel}</div>
                        <div><i class="fas fa-users mr-2"></i>Kelas ${agenda.kelas}</div>
                    </div>
                `;
                agendaList.appendChild(agendaCard);
            });
        }

        // Jurnal Guru functionality
        document.getElementById('jurnalForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            setButtonLoading(submitButton, true);
            
            const jurnalData = {
                tanggal: document.getElementById('jurnalTanggal').value,
                jam: document.getElementById('jurnalJam').value,
                mapel: document.getElementById('jurnalMapel').value,
                kelas: document.getElementById('jurnalKelas').value,
                materi: document.getElementById('jurnalMateri').value,
                hadir: parseInt(document.getElementById('jurnalHadir').value),
                tidakHadir: parseInt(document.getElementById('jurnalTidakHadir').value),
                catatan: document.getElementById('jurnalCatatan').value
            };
            
            if (!jurnalData.tanggal || !jurnalData.materi || isNaN(jurnalData.hadir) || isNaN(jurnalData.tidakHadir)) {
                showNotification('Mohon lengkapi semua field yang wajib!', 'error');
                setButtonLoading(submitButton, false);
                return;
            }
            
            try {
                const result = await sendToGoogleSheets('addJurnal', jurnalData);
                
                if (result.success) {
                    currentJurnalData.unshift(jurnalData);
                    displayJurnalList();
                    this.reset();
                    showNotification('Jurnal berhasil ditambahkan dan disimpan ke Google Sheets!', 'success');
                } else {
                    showNotification('Jurnal ditambahkan tapi gagal disimpan ke Google Sheets', 'error');
                }
            } catch (error) {
                showNotification('Terjadi kesalahan saat menyimpan jurnal', 'error');
            }
            
            setButtonLoading(submitButton, false);
        });

        function displayJurnalList() {
            const jurnalList = document.getElementById('jurnalList');
            jurnalList.innerHTML = '';
            
            currentJurnalData.forEach((jurnal, index) => {
                const jurnalCard = document.createElement('div');
                jurnalCard.className = 'bg-gray-700 p-4 rounded-lg hover-lift animate-fade-in';
                jurnalCard.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="text-lg font-semibold text-white">${jurnal.materi}</h4>
                        <span class="px-3 py-1 bg-green-600 text-white text-sm rounded-full">Jam ke-${jurnal.jam}</span>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-300 mb-3">
                        <div><i class="fas fa-calendar mr-2"></i>${jurnal.tanggal}</div>
                        <div><i class="fas fa-book mr-2"></i>${jurnal.mapel}</div>
                        <div><i class="fas fa-users mr-2"></i>Kelas ${jurnal.kelas}</div>
                        <div><i class="fas fa-user-check mr-2"></i>Hadir: ${jurnal.hadir}, Tidak Hadir: ${jurnal.tidakHadir}</div>
                    </div>
                    ${jurnal.catatan ? `<div class="text-sm text-gray-400 italic"><i class="fas fa-sticky-note mr-2"></i>${jurnal.catatan}</div>` : ''}
                `;
                jurnalList.appendChild(jurnalCard);
            });
        }

        // Data Siswa functionality
        document.getElementById('siswaForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            setButtonLoading(submitButton, true);
            
            const siswaData = {
                nama: document.getElementById('namaSiswa').value.trim(),
                kelas: document.getElementById('kelasSiswa').value
            };
            
            if (!siswaData.nama) {
                showNotification('Mohon isi nama siswa!', 'error');
                setButtonLoading(submitButton, false);
                return;
            }
            
            try {
                const result = await sendToGoogleSheets('addSiswa', siswaData);
                
                if (result.success) {
                    currentSiswaData.push(siswaData);
                    displaySiswaList();
                    this.reset();
                    showNotification('Data siswa berhasil ditambahkan dan disimpan ke Google Sheets!', 'success');
                } else {
                    showNotification('Data siswa ditambahkan tapi gagal disimpan ke Google Sheets', 'error');
                }
            } catch (error) {
                showNotification('Terjadi kesalahan saat menyimpan data siswa', 'error');
            }
            
            setButtonLoading(submitButton, false);
        });

        async function loadDataSiswa() {
            const filterKelas = document.getElementById('filterKelas').value;
            
            try {
                // Always load all students first
                const allSiswaResponse = await getFromGoogleSheets('getSiswa');
                if (allSiswaResponse.success && allSiswaResponse.data) {
                    currentSiswaData = allSiswaResponse.data;
                    console.log('Loaded student data:', currentSiswaData);
                    console.log('Filter kelas:', filterKelas);
                }
                
                displaySiswaList(filterKelas);
                showNotification(`Data siswa berhasil dimuat! ${filterKelas ? `Filter: Kelas ${filterKelas}` : 'Semua kelas'}`, 'success');
            } catch (error) {
                console.error('Error loading student data:', error);
                showNotification('Gagal memuat data siswa dari server, menampilkan data lokal', 'error');
                displaySiswaList(filterKelas); // Show cached data with filter
            }
        }

        function displaySiswaList(filterKelas = '') {
            const siswaTableBody = document.getElementById('siswaTableBody');
            siswaTableBody.innerHTML = '';
            
            console.log('Displaying student list with filter:', filterKelas);
            console.log('Current student data:', currentSiswaData);
            
            let filteredData = [...currentSiswaData]; // Create a copy
            if (filterKelas && filterKelas.trim() !== '') {
                filteredData = currentSiswaData.filter(siswa => {
                    // Convert both values to strings and trim whitespace for comparison
                    const siswaKelas = String(siswa.kelas || '').trim();
                    const targetKelas = String(filterKelas).trim();
                    console.log(`Comparing: "${siswaKelas}" === "${targetKelas}"`);
                    return siswaKelas === targetKelas;
                });
                console.log('Filtered data:', filteredData);
            }
            
            if (filteredData.length === 0) {
                siswaTableBody.innerHTML = `
                    <tr>
                        <td colspan="4" class="py-8 text-center text-gray-400">
                            <i class="fas fa-users text-4xl mb-4"></i><br>
                            ${currentSiswaData.length === 0 ? 
                                'Belum ada data siswa.' : 
                                `Tidak ada siswa di kelas ${filterKelas}.`
                            }<br>
                            <span class="text-sm">${currentSiswaData.length === 0 ? 
                                'Silakan tambah data siswa terlebih dahulu.' : 
                                'Coba pilih kelas lain atau tambah siswa untuk kelas ini.'
                            }</span>
                        </td>
                    </tr>
                `;
                return;
            }
            
            filteredData.forEach((siswa, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-700 animate-fade-in';
                row.innerHTML = `
                    <td class="py-3 text-gray-300">${index + 1}</td>
                    <td class="py-3 text-white">${siswa.nama}</td>
                    <td class="py-3">
                        <span class="px-3 py-1 bg-purple-600 text-white text-sm rounded-full">Kelas ${siswa.kelas}</span>
                    </td>
                    <td class="py-3">
                        <button onclick="hapusSiswa('${siswa.nama}', '${siswa.kelas}')" class="text-red-400 hover:text-red-300 transition-colors duration-200">
                            <i class="fas fa-trash mr-1"></i>Hapus
                        </button>
                    </td>
                `;
                siswaTableBody.appendChild(row);
            });
        }

        async function hapusSiswa(nama, kelas) {
            if (!confirm(`Apakah Anda yakin ingin menghapus data siswa ${nama} dari kelas ${kelas}?`)) {
                return;
            }
            
            try {
                const siswaData = { nama, kelas };
                const result = await sendToGoogleSheets('deleteSiswa', siswaData);
                
                // Remove from local data
                const index = currentSiswaData.findIndex(siswa => siswa.nama === nama && siswa.kelas === kelas);
                if (index !== -1) {
                    currentSiswaData.splice(index, 1);
                }
                
                // Refresh display with current filter
                const filterKelas = document.getElementById('filterKelas').value;
                displaySiswaList(filterKelas);
                showNotification('Data siswa berhasil dihapus!', 'success');
            } catch (error) {
                showNotification('Gagal menghapus data siswa', 'error');
            }
        }

        function getSiswaByKelas(kelas) {
            return currentSiswaData.filter(siswa => siswa.kelas === kelas);
        }

        // Absensi functionality
        async function loadAbsensi() {
            const jenisAbsen = document.getElementById('jenisAbsen').value;
            const kelas = document.getElementById('kelasAbsen').value;
            const tanggal = document.getElementById('tanggalAbsen').value;
            
            if (!tanggal) {
                showNotification('Mohon pilih tanggal!', 'error');
                return;
            }
            
            try {
                // Try to load existing attendance data
                const existingData = await getFromGoogleSheets('getAbsensi', {
                    kelas: kelas,
                    tanggal: tanggal,
                    jenis: jenisAbsen
                });
                
                const siswaGrid = document.getElementById('siswaGrid');
                siswaGrid.innerHTML = '';
                
                // Get students for selected class
                const siswaKelas = getSiswaByKelas(kelas);
                
                if (siswaKelas.length === 0) {
                    siswaGrid.innerHTML = `
                        <div class="col-span-full text-center py-8">
                            <i class="fas fa-users text-4xl text-gray-400 mb-4"></i>
                            <p class="text-gray-400 mb-2">Belum ada data siswa untuk kelas ${kelas}</p>
                            <p class="text-sm text-gray-500">Silakan tambah data siswa terlebih dahulu di menu Data Siswa</p>
                        </div>
                    `;
                    document.getElementById('absensiContainer').classList.remove('hidden');
                    return;
                }
                
                siswaKelas.forEach((siswa, index) => {
                    const existingStatus = existingData.success && existingData.data ? 
                        existingData.data.find(item => item.nama === siswa.nama)?.status || '' : '';
                    
                    const siswaCard = document.createElement('div');
                    siswaCard.className = 'bg-gray-700 p-4 rounded-lg hover-lift animate-fade-in';
                    siswaCard.innerHTML = `
                        <div class="text-center">
                            <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-user text-white"></i>
                            </div>
                            <h4 class="text-white font-semibold mb-3">${siswa.nama}</h4>
                            <select class="absensi-status w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-white" data-siswa="${index}" data-nama="${siswa.nama}">
                                <option value="">Pilih Status</option>
                                <option value="Hadir" ${existingStatus === 'Hadir' ? 'selected' : ''}>Hadir</option>
                                <option value="Sakit" ${existingStatus === 'Sakit' ? 'selected' : ''}>Sakit</option>
                                <option value="Izin" ${existingStatus === 'Izin' ? 'selected' : ''}>Izin</option>
                                <option value="Alfa" ${existingStatus === 'Alfa' ? 'selected' : ''}>Alfa</option>
                            </select>
                        </div>
                    `;
                    siswaGrid.appendChild(siswaCard);
                    
                    // Apply existing status styling
                    if (existingStatus) {
                        const select = siswaCard.querySelector('.absensi-status');
                        select.className = `absensi-status w-full px-3 py-2 border border-gray-500 rounded-lg text-white status-${existingStatus.toLowerCase()}`;
                    }
                });
                
                document.getElementById('absensiContainer').classList.remove('hidden');
                showNotification('Data siswa berhasil dimuat!', 'success');
            } catch (error) {
                showNotification('Gagal memuat data absensi', 'error');
            }
        }

        async function simpanAbsensi() {
            const jenisAbsen = document.getElementById('jenisAbsen').value;
            const kelas = document.getElementById('kelasAbsen').value;
            const tanggal = document.getElementById('tanggalAbsen').value;
            const statusElements = document.querySelectorAll('.absensi-status');
            const saveButton = document.querySelector('#absensiContainer button');
            
            setButtonLoading(saveButton, true);
            
            const absensiData = {
                jenisAbsen,
                kelas,
                tanggal,
                data: []
            };
            
            let allFilled = true;
            statusElements.forEach((element, index) => {
                const status = element.value;
                const nama = element.getAttribute('data-nama');
                
                if (!status) {
                    allFilled = false;
                    return;
                }
                
                absensiData.data.push({
                    nama: nama,
                    status: status
                });
                
                // Update visual feedback
                element.className = `absensi-status w-full px-3 py-2 border border-gray-500 rounded-lg text-white status-${status.toLowerCase()}`;
            });
            
            if (!allFilled) {
                showNotification('Mohon lengkapi status kehadiran semua siswa!', 'error');
                setButtonLoading(saveButton, false);
                return;
            }
            
            try {
                const result = await sendToGoogleSheets('saveAbsensi', absensiData);
                
                if (result.success) {
                    currentAbsensiData.push(absensiData);
                    showNotification('Data absensi berhasil disimpan ke Google Sheets!', 'success');
                } else {
                    showNotification('Gagal menyimpan data absensi ke Google Sheets', 'error');
                }
            } catch (error) {
                showNotification('Terjadi kesalahan saat menyimpan absensi', 'error');
            }
            
            setButtonLoading(saveButton, false);
        }

        // Penilaian functionality
        function loadPenilaian() {
            const kelas = document.getElementById('kelasPenilaian').value;
            const jenis = document.getElementById('jenisPenilaian').value;
            const keterangan = document.getElementById('keteranganPenilaian').value;
            
            if (!keterangan) {
                showNotification('Mohon isi keterangan penilaian!', 'error');
                return;
            }
            
            const penilaianTable = document.getElementById('penilaianTable');
            penilaianTable.innerHTML = '';
            
            // Get students for selected class
            const siswaKelas = getSiswaByKelas(kelas);
            
            if (siswaKelas.length === 0) {
                penilaianTable.innerHTML = `
                    <tr>
                        <td colspan="3" class="py-8 text-center text-gray-400">
                            <i class="fas fa-users text-4xl mb-4"></i><br>
                            Belum ada data siswa untuk kelas ${kelas}<br>
                            <span class="text-sm">Silakan tambah data siswa terlebih dahulu di menu Data Siswa</span>
                        </td>
                    </tr>
                `;
                document.getElementById('penilaianContainer').classList.remove('hidden');
                return;
            }
            
            siswaKelas.forEach((siswa, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-700 animate-fade-in';
                row.innerHTML = `
                    <td class="py-3 text-gray-300">${index + 1}</td>
                    <td class="py-3 text-white">${siswa.nama}</td>
                    <td class="py-3">
                        <input type="number" min="0" max="100" class="nilai-input w-24 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500" data-siswa="${index}" data-nama="${siswa.nama}" placeholder="0-100">
                    </td>
                `;
                penilaianTable.appendChild(row);
            });
            
            document.getElementById('penilaianContainer').classList.remove('hidden');
            showNotification('Data siswa berhasil dimuat!', 'success');
        }

        async function simpanPenilaian() {
            const kelas = document.getElementById('kelasPenilaian').value;
            const jenis = document.getElementById('jenisPenilaian').value;
            const keterangan = document.getElementById('keteranganPenilaian').value;
            const nilaiElements = document.querySelectorAll('.nilai-input');
            const saveButton = document.querySelector('#penilaianContainer button');
            
            setButtonLoading(saveButton, true);
            
            const penilaianData = {
                kelas,
                jenis,
                keterangan,
                tanggal: new Date().toISOString().split('T')[0],
                data: []
            };
            
            let allFilled = true;
            nilaiElements.forEach((element, index) => {
                const nilai = parseInt(element.value);
                const nama = element.getAttribute('data-nama');
                
                if (isNaN(nilai) || nilai < 0 || nilai > 100) {
                    allFilled = false;
                    return;
                }
                
                penilaianData.data.push({
                    nama: nama,
                    nilai: nilai
                });
            });
            
            if (!allFilled) {
                showNotification('Mohon isi nilai yang valid (0-100) untuk semua siswa!', 'error');
                setButtonLoading(saveButton, false);
                return;
            }
            
            try {
                const result = await sendToGoogleSheets('savePenilaian', penilaianData);
                
                if (result.success) {
                    currentPenilaianData.push(penilaianData);
                    showNotification('Data penilaian berhasil disimpan ke Google Sheets!', 'success');
                } else {
                    showNotification('Gagal menyimpan data penilaian ke Google Sheets', 'error');
                }
            } catch (error) {
                showNotification('Terjadi kesalahan saat menyimpan penilaian', 'error');
            }
            
            setButtonLoading(saveButton, false);
        }

        // Rekapan functionality
        function showRekapTab(tab) {
            // Update tab buttons
            document.getElementById('tabAbsensi').className = tab === 'absensi' ? 
                'px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold' : 
                'px-6 py-3 bg-gray-700 text-gray-300 rounded-lg font-semibold';
            
            document.getElementById('tabKehadiran').className = tab === 'kehadiran' ? 
                'px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold' : 
                'px-6 py-3 bg-gray-700 text-gray-300 rounded-lg font-semibold';
            
            // Show/hide tab content
            document.getElementById('rekapAbsensiTab').classList.toggle('hidden', tab !== 'absensi');
            document.getElementById('rekapKehadiranTab').classList.toggle('hidden', tab !== 'kehadiran');
            
            // Hide rekap container
            document.getElementById('rekapContainer').classList.add('hidden');
        }

        async function loadRekapAbsensi() {
            const tingkatan = document.getElementById('tingkatanRekap').value;
            const kelas = document.getElementById('kelasRekap').value;
            const jenis = document.getElementById('jenisRekap').value;
            const tanggal = document.getElementById('tanggalRekap').value;
            
            if (!tanggal) {
                showNotification('Mohon pilih tanggal!', 'error');
                return;
            }
            
            try {
                const rekapData = await getFromGoogleSheets('getRekapAbsensi', {
                    tingkatan,
                    kelas,
                    jenis,
                    tanggal
                });
                
                const rekapContent = document.getElementById('rekapContent');
                
                if (rekapData.success && rekapData.data) {
                    // Display actual data from Google Sheets
                    rekapContent.innerHTML = `
                        <h3 class="text-xl font-semibold text-white mb-6">Rekap Absensi Kelas ${tingkatan}.${kelas}</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="pb-3 text-gray-300">No</th>
                                        <th class="pb-3 text-gray-300">Nama Siswa</th>
                                        <th class="pb-3 text-gray-300">Status</th>
                                        <th class="pb-3 text-gray-300">Keterangan</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${rekapData.data.map((item, index) => `
                                        <tr class="border-b border-gray-700">
                                            <td class="py-3 text-gray-300">${index + 1}</td>
                                            <td class="py-3 text-white">${item.nama}</td>
                                            <td class="py-3">
                                                <span class="px-3 py-1 rounded-full text-white text-sm status-${item.status.toLowerCase()}">${item.status}</span>
                                            </td>
                                            <td class="py-3 text-gray-300">${item.keterangan || '-'}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    `;
                } else {
                    // Display sample data if no data found
                    rekapContent.innerHTML = `
                        <h3 class="text-xl font-semibold text-white mb-6">Rekap Absensi Kelas ${tingkatan}.${kelas}</h3>
                        <p class="text-gray-400 mb-4">Tidak ada data untuk tanggal yang dipilih. Menampilkan data contoh:</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b border-gray-700">
                                        <th class="pb-3 text-gray-300">No</th>
                                        <th class="pb-3 text-gray-300">Nama Siswa</th>
                                        <th class="pb-3 text-gray-300">Status</th>
                                        <th class="pb-3 text-gray-300">Keterangan</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${sampleStudents.map((nama, index) => {
                                        const statuses = ['Hadir', 'Sakit', 'Izin', 'Alfa'];
                                        const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                                        return `
                                            <tr class="border-b border-gray-700">
                                                <td class="py-3 text-gray-300">${index + 1}</td>
                                                <td class="py-3 text-white">${nama}</td>
                                                <td class="py-3">
                                                    <span class="px-3 py-1 rounded-full text-white text-sm status-${randomStatus.toLowerCase()}">${randomStatus}</span>
                                                </td>
                                                <td class="py-3 text-gray-300">${randomStatus === 'Sakit' ? 'Demam' : randomStatus === 'Izin' ? 'Keperluan keluarga' : '-'}</td>
                                            </tr>
                                        `;
                                    }).join('')}
                                </tbody>
                            </table>
                        </div>
                    `;
                }
                
                document.getElementById('rekapContainer').classList.remove('hidden');
                showNotification('Rekap absensi berhasil dimuat!', 'success');
            } catch (error) {
                showNotification('Gagal memuat rekap absensi', 'error');
            }
        }

        async function loadTotalKehadiran() {
            const kelas = document.getElementById('kelasKehadiran').value;
            
            try {
                const kehadiranData = await getFromGoogleSheets('getTotalKehadiran', { kelas });
                
                const rekapContent = document.getElementById('rekapContent');
                
                // Generate summary data (you can replace this with actual data from Google Sheets)
                const totalHadir = Math.floor(Math.random() * 10) + 15;
                const totalSakit = Math.floor(Math.random() * 5) + 1;
                const totalIzin = Math.floor(Math.random() * 3) + 1;
                const totalAlfa = Math.floor(Math.random() * 2);
                
                rekapContent.innerHTML = `
                    <h3 class="text-xl font-semibold text-white mb-6">Total Kehadiran Kelas ${kelas}</h3>
                    
                    <!-- Summary Cards -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-green-600 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white">${totalHadir}</div>
                            <div class="text-green-100">Hadir</div>
                        </div>
                        <div class="bg-yellow-600 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white">${totalSakit}</div>
                            <div class="text-yellow-100">Sakit</div>
                        </div>
                        <div class="bg-blue-600 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white">${totalIzin}</div>
                            <div class="text-blue-100">Izin</div>
                        </div>
                        <div class="bg-red-600 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white">${totalAlfa}</div>
                            <div class="text-red-100">Alfa</div>
                        </div>
                    </div>
                    
                    <!-- Detailed Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="border-b border-gray-700">
                                    <th class="pb-3 text-gray-300">No</th>
                                    <th class="pb-3 text-gray-300">Nama Siswa</th>
                                    <th class="pb-3 text-gray-300">Hadir</th>
                                    <th class="pb-3 text-gray-300">Sakit</th>
                                    <th class="pb-3 text-gray-300">Izin</th>
                                    <th class="pb-3 text-gray-300">Alfa</th>
                                    <th class="pb-3 text-gray-300">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${sampleStudents.map((nama, index) => {
                                    const hadir = Math.floor(Math.random() * 5) + 12;
                                    const sakit = Math.floor(Math.random() * 3);
                                    const izin = Math.floor(Math.random() * 2);
                                    const alfa = Math.floor(Math.random() * 2);
                                    const total = hadir + sakit + izin + alfa;
                                    
                                    return `
                                        <tr class="border-b border-gray-700">
                                            <td class="py-3 text-gray-300">${index + 1}</td>
                                            <td class="py-3 text-white">${nama}</td>
                                            <td class="py-3 text-green-400">${hadir}</td>
                                            <td class="py-3 text-yellow-400">${sakit}</td>
                                            <td class="py-3 text-blue-400">${izin}</td>
                                            <td class="py-3 text-red-400">${alfa}</td>
                                            <td class="py-3 text-white font-semibold">${total}</td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
                
                document.getElementById('rekapContainer').classList.remove('hidden');
                showNotification('Total kehadiran berhasil dimuat!', 'success');
            } catch (error) {
                showNotification('Gagal memuat total kehadiran', 'error');
            }
        }

        function cetakRekap() {
            const rekapContent = document.getElementById('rekapContent').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Cetak Rekap - SMPN 58 PLG</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                            th { background-color: #f2f2f2; }
                            .status-hadir { background-color: #10b981; color: white; padding: 4px 8px; border-radius: 4px; }
                            .status-sakit { background-color: #f59e0b; color: white; padding: 4px 8px; border-radius: 4px; }
                            .status-izin { background-color: #3b82f6; color: white; padding: 4px 8px; border-radius: 4px; }
                            .status-alfa { background-color: #ef4444; color: white; padding: 4px 8px; border-radius: 4px; }
                        </style>
                    </head>
                    <body>
                        <h1>SMPN 58 Palembang</h1>
                        <h2>Laporan Kehadiran Siswa</h2>
                        <p>Tanggal Cetak: ${new Date().toLocaleDateString('id-ID')}</p>
                        ${rekapContent}
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('tanggalAbsen').value = today;
            document.getElementById('tanggalRekap').value = today;
            
            // Set current date and time for agenda and jurnal
            document.getElementById('agendaTanggal').value = today;
            document.getElementById('jurnalTanggal').value = today;
        });

        // Responsive sidebar handling
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 1024) {
                document.getElementById('sidebar').classList.remove('-translate-x-full');
                document.getElementById('sidebarOverlay').classList.add('hidden');
            } else {
                document.getElementById('sidebar').classList.add('-translate-x-full');
                document.getElementById('sidebarOverlay').classList.add('hidden');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'974b32f37787f4e4',t:'MTc1NjEyNjA1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
